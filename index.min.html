<!DOCTYPE html><html><head><style>body{margin:0;padding:0}</style><body><h3>Space to jump, 0 for fire,1 for rock</h3><canvas id=myCanvas width=1000 height=600></canvas><script>function animate(){reqAnimFrame=window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame||window.oRequestAnimationFrame,reqAnimFrame(animate),grassX>x?(x=canvas.width,loop1=!1):grassX>x1&&(x1=canvas.width,loop2=!1),xSpawn>x?loop2=!0:xSpawn>x1&&(loop1=!0),loop1&&loop2&&!jump&&(playerX>x-grassX&&x1>playerX+player.width||playerX>x1-grassX&&x>playerX+player.width)&&location.reload(),draw()}function draw(){for(var e=0;grassLen>e&&loop1;e++)context.clearRect(x+grass.width*e,.85*canvas.height,grass.width,grass.height),context.drawImage(grass,x+grass.width*e,.85*canvas.height,grass.width,grass.height);lastX=grass.width*grassLen,loop1&&(context.clearRect(x+lastX,.85*canvas.height,grass.width,grass.height),x+=speed);for(var e=0;grassLen>e&&loop2;e++)context.clearRect(x1+grass.width*e,.85*canvas.height,grass.width,grass.height),context.drawImage(grass,x1+grass.width*e,.85*canvas.height,grass.width,grass.height);loop2&&(context.clearRect(x1+lastX,.85*canvas.height,grass.width,grass.height),x1+=speed),jump&&(context.clearRect(playerX,playerY,player.width,player.height),playerY<=canvas.width/5&&(jumpDir*=-1),playerY+=jumpDir,context.drawImage(player,playerX,playerY),playerY==playerYDefault&&(jump=!1,jumpDir*=-1));for(var e=0;e<obstacleArr.length;e++)obstacleArr[e].x+=speed,obstacleArr[e].x<=playerX+player.width&&location.reload(),context.clearRect(obstacleArr[e].x-speed,obstacleArr[e].y,obstacleArr[e].obsImg.width,obstacleArr[e].obsImg.height),context.drawImage(obstacleArr[e].obsImg,obstacleArr[e].x,obstacleArr[e].y,obstacleArr[e].obsImg.width,obstacleArr[e].obsImg.height)}function generateObstacle(){var e,a=new Image,r=randomInt();a.onload=function(){e={index:r,x:canvas.width,y:.85*canvas.height-a.height,obsImg:a},obstacleArr[obstacleArr.length]=e},a.src=obstacleSrc[r]}function whatKey(e){32==e.keyCode?jump=!0:(48==e.keyCode||49==e.keyCode)&&(console.log(e.keyCode-48),delObstacle(e.keyCode-48))}function randomInt(){return~~(2*Math.random())}function delObstacle(e){for(var a=0;a<obstacleArr.length;a++)obstacleArr[a].index==e&&(context.clearRect(obstacleArr[a].x,obstacleArr[a].y,obstacleArr[a].obsImg.width,obstacleArr[a].obsImg.height),obstacleArr.remove(a))}var x=0,x1,speed=-5,grassLen=5,gorgeSize=1,loop1=!0,loop2=!1,lastX,xSpawn=-10,canvas=document.getElementById("myCanvas"),context=canvas.getContext("2d"),playerY,playerX=.05*canvas.width,playerYDefault,jump=!1,jumpDir=-5,grass,obstacleSrc=["fire.png","rock.png"],obstacleArr=[];window.addEventListener("keydown",whatKey,!0),Array.prototype.remove=function(e,a){var r=this.slice((a||e)+1||this.length);return this.length=0>e?this.length+e:e,this.push.apply(this,r)};var player=new Image;setInterval(generateObstacle,2e3),player.onload=function(){playerY=.85*canvas.height-player.height,playerYDefault=playerY,context.drawImage(player,playerX,playerY)},player.src="player.png";var grassX=-10;x1=canvas.width,grass=new Image,grass.onload=function(){grassX=grass.width*grassLen*-1,xSpawn=canvas.width-grass.width*gorgeSize+grassX},grass.src="water.png",animate();</script>